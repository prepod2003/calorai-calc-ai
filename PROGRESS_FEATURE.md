# Визуализация прогресса по дневным целям

## Описание функциональности

Добавлена визуализация прогресса достижения дневных целей КБЖУ во вкладке "История". Для каждого показателя (Калории, Белки, Жиры, Углеводы, Клетчатка) теперь отображается:

1. **Прогресс-бар** - визуально показывает процент достижения цели
2. **Процент выполнения** - точное числовое значение на прогресс-баре
3. **Целевое значение** - текст под прогресс-баром (например, "из 120 г")

## Цветовое кодирование

- **Норма (0-109%)**: Прогресс-бар окрашен в светлый оттенок соответствующего цвета нутриента
  - Калории: светло-синий
  - Белки: светло-зеленый
  - Жиры: светло-оранжевый
  - Углеводы: светло-фиолетовый
  - Клетчатка: светло-голубой

- **Превышение (≥110%)**: Прогресс-бар становится красным, текст белым и жирным

## Техническая реализация

### 1. Обновленные типы (`types.ts`)
```typescript
export interface HistoryEntry {
    // ... существующие поля
    progressPercentages?: {
        calories: number;
        protein: number;
        fat: number;
        carbohydrate: number;
        fiber: number;
    };
}
```

### 2. Расчет процентов (`utils/calculations.ts`)
Функция `calculateProgressPercentages()` вычисляет проценты относительно дневных целей из профиля пользователя.

### 3. Реактивный подход (производительность)
- **При добавлении блюда**: проценты рассчитываются в `handleSaveDish()` и сохраняются в историю
- **При удалении блюда**: проценты пересчитываются в `handleRemoveMeal()`
- **Миграция данных**: старые записи истории автоматически обновляются при изменении профиля
- **При отображении**: компонент HistoryView просто читает готовые данные без вычислений

### 4. UI компонент (`components/HistoryView.tsx`)
Компонент `NutritionLabel` расширен для отображения:
- Тонкого прогресс-бара под основным значением
- Процента выполнения на самом прогресс-баре
- Целевого значения под прогресс-баром серым текстом

## Использование

1. Настройте профиль пользователя (иконка профиля в правом верхнем углу)
2. Укажите пол, возраст, вес, рост, уровень активности и цель
3. Нажмите "Рассчитать с помощью AI" или введите цели вручную
4. Сохраните профиль
5. Добавляйте приемы пищи как обычно
6. Перейдите во вкладку "История" - теперь для каждого дня отображаются прогресс-бары

## Примечание

- Прогресс-бары отображаются только если у пользователя заполнен профиль с дневными целями
- Без профиля отображаются только обычные плашки с КБЖУ (как раньше)
- Все данные хранятся локально в браузере (localStorage)
